<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¸ å‰ä»–å’Œå¼¦çŸ©é™£åº«</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <style>
        :root { --primary: #2c3e50; --accent: #e67e22; --success: #27ae60; --bg: #f8f9fa; }
        body { font-family: sans-serif; background-color: var(--bg); margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .controls { margin-bottom: 20px; text-align: center; }
        #soundToggle { padding: 10px 20px; border-radius: 20px; border: none; cursor: pointer; background: #ddd; font-weight: bold; }
        #soundToggle.active { background: var(--success); color: white; }
        .main-container { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; width: 100%; max-width: 1100px; }
        
        /* çŸ©é™£æ’ç‰ˆ */
        .chord-section { background: white; padding: 15px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); overflow-x: auto; }
        table { border-collapse: collapse; width: 100%; }
        th { color: #888; font-size: 0.8rem; padding: 5px; }
        td { padding: 4px; text-align: center; }
        .row-label { font-weight: bold; color: var(--primary); padding-right: 10px; }
        
        .chord-btn { width: 65px; padding: 10px 0; border: 1px solid #eee; background: white; border-radius: 6px; cursor: pointer; font-weight: bold; }
        .chord-btn:hover { border-color: var(--accent); }
        .chord-btn.active { background: var(--accent); color: white; border-color: var(--accent); }

        /* å³å´å±•ç¤º */
        .display-card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); width: 280px; text-align: center; height: fit-content; }
        .status-bar { display: flex; justify-content: space-between; width: 160px; margin: 0 auto 5px auto; font-size: 1.2rem; }
        .fretboard { width: 160px; height: 200px; margin: 0 auto; position: relative; border: 2px solid #444; background: white; }
        .string { position: absolute; width: 1px; background: #ccc; height: 100%; }
        .fret { position: absolute; height: 2px; background: #444; width: 100%; }
        .s1{left:100%} .s2{left:80%} .s3{left:60%} .s4{left:40%} .s5{left:20%} .s6{left:0%}
        .f1{top:20%} .f2{top:40%} .f3{top:60%} .f4{top:80%}
        .finger { position: absolute; width: 20px; height: 20px; background: #e74c3c; border-radius: 50%; transform: translate(-50%, -50%); z-index: 10; }
        @media (max-width: 800px) { .main-container { flex-direction: column-reverse; align-items: center; } }
    </style>
</head>
<body>

    <h1>ğŸ¸ å‰ä»–å’Œå¼¦çŸ©é™£</h1>
    
    <div class="controls">
        <button id="soundToggle" onclick="toggleSound()">ğŸ”‡ è²éŸ³ï¼šé—œé–‰</button>
        <p id="msg" style="font-size: 0.8rem; color: #999;">é»æ“ŠæŒ‰éˆ•é¸å–å’Œå¼¦</p>
    </div>

    <div class="main-container">
        <div class="chord-section">
            <table>
                <thead>
                    <tr><th></th><th>Major</th><th>Minor</th><th>Maj7</th><th>7th</th><th>Sus4</th><th>Slash</th></tr>
                </thead>
                <tbody id="matrixBody">
                    </tbody>
            </table>
        </div>

        <div class="display-card">
            <div class="status-bar" id="statusBar">
                <div class="status-item"></div><div class="status-item"></div><div class="status-item"></div>
                <div class="status-item"></div><div class="status-item"></div><div class="status-item"></div>
            </div>
            <div class="fretboard" id="fretboard">
                <div class="string s1"></div><div class="string s2"></div><div class="string s3"></div>
                <div class="string s4"></div><div class="string s5"></div><div class="string s6"></div>
                <div class="fret f1"></div><div class="fret f2"></div><div class="fret f3"></div><div class="fret f4"></div>
            </div>
            <h2 id="currentName" style="color: var(--accent); margin: 15px 0 5px 0;">è«‹é¸æ“‡å’Œå¼¦</h2>
            <p id="chordNotes" style="font-size: 0.8rem; color: #666;">çµ„æˆéŸ³ï¼š-</p>
        </div>
    </div>

    <script>
        // è³‡æ–™åº« (ç¢ºä¿æ¯å€‹ key éƒ½æœ‰å°æ‡‰)
        const chordData = {
            "C": { fingers: [{s:5, f:3}, {s:4, f:2}, {s:2, f:1}], status: ["x","o","o","o","o","o"], notes: "C E G", freq: ["C3","E3","G3","C4","E4"] },
            "Cm": { fingers: [{s:5, f:3}, {s:4, f:5}, {s:3, f:5}, {s:2, f:4}, {s:1, f:3}], status: ["x","o","o","o","o","o"], notes: "C Eb G", freq: ["C3","G3","C4","Eb4","G4"] },
            "Cmaj7": { fingers: [{s:5, f:3}, {s:4, f:2}, {s:2, f:0}], status: ["x","o","o","o","o","o"], notes: "C E G B", freq: ["C3","E3","G3","B3","E4"] },
            "C7": { fingers: [{s:5, f:3}, {s:4, f:2}, {s:3, f:3}, {s:2, f:1}], status: ["x","o","o","o","o","o"], notes: "C E G Bb", freq: ["C3","E3","Bb3","C4","E4"] },
            "Csus4": { fingers: [{s:5, f:3}, {s:4, f:3}, {s:3, f:0}, {s:2, f:1}], status: ["x","o","o","o","o","o"], notes: "C F G", freq: ["C3","F3","G3","C4"] },
            "C/G": { fingers: [{s:6, f:3}, {s:5, f:3}, {s:4, f:2}, {s:2, f:1}], status: ["o","o","o","o","o","o"], notes: "G C E G", freq: ["G2","C3","E3","G3","C4","E4"] },
            "D": { fingers: [{s:3, f:2}, {s:2, f:3}, {s:1, f:2}], status: ["x","x","o","o","o","o"], notes: "D F# A", freq: ["D3","A3","D4","F#4"] },
            "Dm": { fingers: [{s:3, f:2}, {s:2, f:3}, {s:1, f:1}], status: ["x","x","o","o","o","o"], notes: "D F A", freq: ["D3","A3","D4","F4"] },
            "Dmaj7": { fingers: [{s:3,
